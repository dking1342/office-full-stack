<ng-container *ngIf="(appStateForm$ | async) as appStateForm" [ngSwitch]="appStateForm.dataState">
    <ng-container *ngSwitchCase="DataState.LOADING">
        loading...
    </ng-container>
    <ng-container *ngSwitchCase="DataState.LOADED">
        loaded data
    </ng-container>
    <ng-container *ngSwitchCase="DataState.ERROR">
        {{appStateForm.error}}
    </ng-container>
</ng-container>

<form [formGroup]="form" (ngSubmit)="submitForm()">
    <div>
        <label for="pname">Name</label>
        <input 
            type="text" 
            autocomplete="off"
            name="pname" 
            formControlName="pname"    
        >
        <app-validation-message
            [component]="pname"
            message="Please provide a customer name"
            [submitted]="submitted"
            [isFormField]="isFormField"
        ></app-validation-message>
    </div>
    <div>
        <input type="submit" value="Submit">
        <app-validation-message
            [component]="form"
            message="Please correct form fields"
            [submitted]="submitted"
            [isFormField]="!isFormField"
        ></app-validation-message>
    </div>
</form>
